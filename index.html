<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>ä¸»æ—‹å¾‹æ¸¬è©¦æ’­æ”¾å™¨ ğŸ¶</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #2c3e50; color: white; }
        .card { background: #34495e; padding: 40px; border-radius: 20px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 350px; }
        #typing-text { font-size: 1.2rem; margin-bottom: 20px; min-height: 1.5em; color: #ecf0f1; }
        button { background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1rem; cursor: pointer; font-weight: bold; }
        button:hover { background: #c0392b; }
    </style>
</head>
<body>

    <div class="card">
        <div id="typing-text"></div>
        <button id="playBtn" onclick="playMelody()">â–¶ï¸ è½è½çœ‹ä¸»æ—‹å¾‹</button>
    </div>

    <script>
        async function playMelody() {
            await Tone.start();
            document.getElementById("playBtn").style.display = "none";

            // 1. æ‰“å­—æ©Ÿæ•ˆæœ
            const message = "æ­£åœ¨ç‚ºæ‚¨æ’­æ”¾å°ˆå±¬ä¸»æ—‹å¾‹...";
            typeWriter(message, 0);

            // 2. æ’­æ”¾æ–¹æ³¢æ—‹å¾‹ (è§£æè‡ªä½ æä¾›çš„ MML)
            const synth = new Tone.Synth({
                oscillator: { type: "square" }
            }).toDestination();

            // å®šç¾©ä½ æä¾›çš„æ—‹å¾‹ç‰‡æ®µ (ABC æ ¼å¼)
            // L:1/16, Q:113
            const melody = [
                { note: "D#5", time: 0, dur: "16n" },
                { note: "D#5", time: "8n", dur: "16n" },
                { note: "C#5", time: "4n", dur: "16n" },
                { note: "B4",  time: "4n.", dur: "8n" },
                { note: "C#5", time: "2n", dur: "16n" },
                { note: "D5",  time: "2n.", dur: "8n" }
            ];

            const now = Tone.now();
            melody.forEach(n => {
                synth.triggerAttackRelease(n.note, n.dur, now + Tone.Time(n.time).toSeconds());
            });
        }

        function typeWriter(text, i) {
            if (i < text.length) {
                document.getElementById("typing-text").innerHTML += text.charAt(i);
                setTimeout(() => typeWriter(text, i + 1), 100);
            }
        }
    </script>
</body>
</html>
